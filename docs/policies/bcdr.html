<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="The CloudCore Contingency Plan establishes procedures to recover CloudCore following a disruption resulting from a disaster.">

<title>CloudCore - Business Continuity and Disaster Recovery</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">CloudCore</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../pricing.html"> 
<span class="menu-text">Pricing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../chatbots/index.html"> 
<span class="menu-text">ChatBots</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-docs" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Docs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-docs">    
        <li>
    <a class="dropdown-item" href="../../docs/interviews.html">
 <span class="dropdown-text">Transcripts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../docs/policies.html">
 <span class="dropdown-text">Policies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../docs/support.html">
 <span class="dropdown-text">Other</span></a>
  </li>  
        <li class="dropdown-header">docs/processing.qmd</li>
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../contact.html"> 
<span class="menu-text">Contact US</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#policy-statements" id="toc-policy-statements" class="nav-link active" data-scroll-target="#policy-statements">Policy Statements</a></li>
  <li><a href="#controls-and-procedures" id="toc-controls-and-procedures" class="nav-link" data-scroll-target="#controls-and-procedures">Controls and Procedures</a>
  <ul class="collapse">
  <li><a href="#bcdr-objectives-and-roles" id="toc-bcdr-objectives-and-roles" class="nav-link" data-scroll-target="#bcdr-objectives-and-roles">BCDR Objectives and Roles</a></li>
  <li><a href="#general-disaster-recovery-procedures" id="toc-general-disaster-recovery-procedures" class="nav-link" data-scroll-target="#general-disaster-recovery-procedures">General Disaster Recovery Procedures</a></li>
  <li><a href="#testing-and-maintenance" id="toc-testing-and-maintenance" class="nav-link" data-scroll-target="#testing-and-maintenance">Testing and Maintenance</a></li>
  <li><a href="#work-site-recovery" id="toc-work-site-recovery" class="nav-link" data-scroll-target="#work-site-recovery">Work Site Recovery</a></li>
  <li><a href="#application-service-event-recovery" id="toc-application-service-event-recovery" class="nav-link" data-scroll-target="#application-service-event-recovery">Application Service Event Recovery</a></li>
  <li><a href="#production-environments-and-data-recovery" id="toc-production-environments-and-data-recovery" class="nav-link" data-scroll-target="#production-environments-and-data-recovery">Production Environments and Data Recovery</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Business Continuity and Disaster Recovery</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Risk Management</div>
    <div class="quarto-category">Operational Continuity</div>
    <div class="quarto-category">Disaster Recovery</div>
  </div>
  </div>

<div>
  <div class="description">
    The CloudCore Contingency Plan establishes procedures to recover CloudCore following a disruption resulting from a disaster.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<table class="table">
<tbody>
<tr class="odd">
<td><strong>Title</strong></td>
<td>Business Continuity and Disaster Recovery</td>
</tr>
<tr class="even">
<td><strong>Doc#</strong></td>
<td>POL-RISK-008</td>
</tr>
<tr class="odd">
<td><strong>Version</strong></td>
<td>1.0</td>
</tr>
<tr class="even">
<td><strong>Date</strong></td>
<td>08-11-2023</td>
</tr>
</tbody>
</table>
<p>The CloudCore Contingency Plan establishes procedures to recover CloudCore following a disruption resulting from a disaster. This Disaster Recovery Policy is maintained by the CloudCore Security Officer and Privacy Officer.</p>
<p><strong>HIPAA:</strong> This CloudCore Contingency Plan has been developed as required under the Office of Management and Budget (OMB) Circular A-130, Management of Federal Information Resources, Appendix III, November 2000, and the Health Insurance Portability and Accountability Act (HIPAA) Final Security Rule, Section ยง164.308(a)(7), which requires the establishment and implementation of procedures for responding to events that damage systems containing electronic protected health information.</p>
<section id="policy-statements" class="level2">
<h2 class="anchored" data-anchor-id="policy-statements">Policy Statements</h2>
<p>CloudCore policy requires that:</p>
<ol type="a">
<li><p>A plan and process for business continuity and disaster recovery (BCDR), including the backup and recovery of systems and data, must be defined and documented.</p></li>
<li><p>BCDR shall be simulated and tested at least once a year. Metrics shall be measured and identified recovery enhancements shall be filed to improve the BCDR process.</p></li>
<li><p>Security controls and requirements must be maintained during all BCDR activities.</p></li>
</ol>
</section>
<section id="controls-and-procedures" class="level2">
<h2 class="anchored" data-anchor-id="controls-and-procedures">Controls and Procedures</h2>
<section id="bcdr-objectives-and-roles" class="level3">
<h3 class="anchored" data-anchor-id="bcdr-objectives-and-roles">BCDR Objectives and Roles</h3>
<section id="objectives" class="level4">
<h4 class="anchored" data-anchor-id="objectives">Objectives</h4>
<p>The following objectives have been established for this plan:</p>
<ol type="1">
<li><p>Maximise the effectiveness of contingency operations through an established plan that consists of the following phases:</p>
<ul>
<li><em>Notification/Activation phase</em> to detect and assess damage and to activate the plan;</li>
<li><em>Recovery phase</em> to restore temporary IT operations and recover damage done to the original system;</li>
<li><em>Reconstitution phase</em> to restore IT system processing capabilities to normal operations.</li>
</ul></li>
<li><p>Identify the activities, resources, and procedures needed to carry out CloudCore processing requirements during prolonged interruptions to normal operations.</p></li>
<li><p>Identify and define the impact of interruptions to CloudCore systems.</p></li>
<li><p>Assign responsibilities to designated personnel and provide guidance for recovering CloudCore during prolonged periods of interruption to normal operations.</p></li>
<li><p>Ensure coordination with other CloudCore staff who will participate in the contingency planning strategies.</p></li>
<li><p>Ensure coordination with external points of contact and vendors who will participate in the contingency planning strategies.</p></li>
</ol>
<p>Example of the types of disasters that would initiate this plan are natural disaster, political disturbances, man made disaster, external human threats, and internal malicious activities.</p>
<p>CloudCore defined two categories of systems from a disaster recovery perspective.</p>
<ol type="1">
<li><em>Critical Systems</em>. These systems host production application servers/services and database servers/services or are required for functioning of systems that host production applications and data. These systems, if unavailable, affect the integrity of data and must be restored, or have a process begun to restore them, immediately upon becoming unavailable.</li>
<li><em>Non-critical Systems</em>. These are all systems not considered critical by definition above. These systems, while they may affect the performance and overall security of critical systems, do not prevent Critical systems from functioning and being accessed appropriately. These systems are restored at a lower priority than critical systems.</li>
</ol>
</section>
<section id="line-of-succession" class="level4">
<h4 class="anchored" data-anchor-id="line-of-succession">Line of Succession</h4>
<p>The following order of succession to ensure that decision-making authority for the CloudCore Contingency Plan is uninterrupted. The Chief Operating Officer (COO) is responsible for ensuring the safety of personnel and the execution of procedures documented within this CloudCore Contingency Plan. The Head of Engineering is responsible for the recovery of CloudCore technical environments. If the COO or Head of Engineering is unable to function as the overall authority or chooses to delegate this responsibility to a successor, the CEO shall function as that authority or choose an alternative delegate. To provide contact initiation should the contingency plan need to be initiated, please use the contact list below.</p>
<ul>
<li>Joe Blog, COO:</li>
<li>Steve PLanter, Head of Engineering:</li>
<li>Leo Kelp, CEO:</li>
</ul>
</section>
<section id="response-teams-and-responsibilities" class="level4">
<h4 class="anchored" data-anchor-id="response-teams-and-responsibilities">Response Teams and Responsibilities</h4>
<p>The following teams have been developed and trained to respond to a contingency event affecting CloudCore infrastructure and systems.</p>
<ol type="1">
<li><p><strong>IT</strong> is responsible for recovery of the CloudCore hosted environment, network devices, and all servers. The team includes personnel responsible for the daily IT operations and maintenance. The team leader is the IT Manager who reports to the COO.</p></li>
<li><p><strong>HR &amp; Facilities</strong> is responsible for ensuring the physical safety of all CloudCore personnel and environmental safety at each CloudCore physical location. The team members also include site leads at each CloudCore work site. The team leader is the Facilities Manager who reports to the COO.</p></li>
<li><p><strong>DevOps</strong> is responsible for assuring all applications, web services, platform and their supporting infrastructure in the Cloud. The team is also responsible for testing re-deployments and assessing damage to the environment. The team leader is the Head of Engineering.</p></li>
<li><p><strong>Security</strong> is responsible for assessing and responding to all cybersecurity related incidents according to CloudCore Incident Response policy and procedures. The security team shall assist the above teams in recovery as needed in non-cybersecurity events. The team leader is the Security Officer.</p></li>
</ol>
<p>Members of above teams must maintain local copies of the contact information of the BCDR succession team. Additionally, the team leads must maintain a local copy of this policy in the event Internet access is not available during a disaster scenario.</p>
<p>All executive leadership shall be informed of any and all contingency events. Current members of CloudCore leadership team include the .</p>
</section>
</section>
<section id="general-disaster-recovery-procedures" class="level3">
<h3 class="anchored" data-anchor-id="general-disaster-recovery-procedures">General Disaster Recovery Procedures</h3>
<section id="notification-and-activation-phase" class="level4">
<h4 class="anchored" data-anchor-id="notification-and-activation-phase">Notification and Activation Phase</h4>
<p>This phase addresses the initial actions taken to detect and assess damage inflicted by a disruption to CloudCore. Based on the assessment of the Event, sometimes according to the CloudCore Incident Response Policy, the Contingency Plan may be activated by either the COO or Head of Engineering. The Contingency Plan may also be activated by the Security Officer in the event of a cyber disaster.</p>
<p>The notification sequence is listed below:</p>
<ul>
<li><p>The first responder is to notify the COO. All known information must be relayed to the COO.</p></li>
<li><p>The COO is to contact the Response Teams and inform them of the event. The COO or delegate is responsible to begin assessment procedures.</p></li>
<li><p>The COO is to notify team members and direct them to complete the assessment procedures outlined below to determine the extent of damage and estimated recovery time. If damage assessment cannot be performed locally because of unsafe conditions, the COO is to following the steps below.</p>
<ul>
<li>Damage Assessment Procedures:</li>
<li>The COO is to logically assess damage, gain insight into whether the infrastructure is salvageable, and begin to formulate a plan for recovery.</li>
<li>Alternate Assessment Procedures:</li>
<li>Upon notification, the COO is to follow the procedures for damage assessment with the Response Teams.</li>
</ul></li>
<li><p>The CloudCore Contingency Plan is to be activated if one or more of the following criteria are met:</p>
<ul>
<li>CloudCore will be unavailable for more than 48 hours.</li>
<li>On-premise hosting facility or cloud infrastructure service is damaged and will be unavailable for more than 24 hours.</li>
<li>Other criteria, as appropriate and as defined by CloudCore.</li>
</ul></li>
<li><p>If the plan is to be activated, the COO is to notify and inform team members of the details of the event and if relocation is required.</p></li>
<li><p>Upon notification from the COO, group leaders and managers are to notify their respective teams. Team members are to be informed of all applicable information and prepared to respond and relocate if necessary.</p></li>
<li><p>The COO is to notify the hosting facility partners that a contingency event has been declared and to ship the necessary materials (as determined by damage assessment) to the alternate site.</p></li>
<li><p>The COO is to notify remaining personnel and executive leadership on the general status of the incident.</p></li>
<li><p>Notification can be message, email, or phone.</p></li>
</ul>
</section>
<section id="recovery-phase" class="level4">
<h4 class="anchored" data-anchor-id="recovery-phase">Recovery Phase</h4>
<p>This section provides procedures for recovering CloudCore infrastructure and operations at an alternate site, whereas other efforts are directed to repair damage to the original system and capabilities.</p>
<p>Procedures are outlined per team required. Each procedure should be executed in the sequence it is presented to maintain efficient operations.</p>
<p>Recovery Goal: The goal is to rebuild CloudCore infrastructure to a production state.</p>
<p>The tasks outlines below are not sequential and some can be run in parallel.</p>
<ol type="1">
<li>Contact Partners and Customers affected to begin initial communication - DevOps</li>
<li>Assess damage to the environment - DevOps</li>
<li>Create a new production environment using new environment bootstrap automation - DevOps</li>
<li>Ensure secure access to the new environment - Security</li>
<li>Begin code deployment and data replication using pre-established automation - DevOps</li>
<li>Test new environment and applications using pre-written tests - DevOps</li>
<li>Test logging, security, and alerting functionality - DevOps and Security</li>
<li>Assure systems and applications are appropriately patched and up to date - DevOps</li>
<li>Update DNS and other necessary records to point to new environment - DevOps</li>
<li>Update Partners and Customers affected through established channels - DevOps</li>
</ol>
</section>
<section id="reconstitution-phase" class="level4">
<h4 class="anchored" data-anchor-id="reconstitution-phase">Reconstitution Phase</h4>
<p>This section discusses activities necessary for restoring full CloudCore operations at the original or new site. The goal is to restore full operations within 24 hours of a disaster or outage. If necessary, when the hosted data center at the original or new site has been restored, CloudCore operations at the alternate site may be transitioned back. The goal is to provide a seamless transition of operations from the alternate site to the computer center.</p>
<ol type="1">
<li><p>Original or New Site Restoration</p>
<ul>
<li>Repeat steps 5-9 in the Recovery Phase at the original or new site / environment.</li>
<li>Restoration of Original site is unnecessary for cloud environments, except when required for forensic purpose.</li>
</ul></li>
<li><p>Plan Deactivation</p>
<ul>
<li>If the CloudCore environment is moved back to the original site from the alternative site, all hardware used at the alternate site should be handled and disposed of according to the CloudCore Media Disposal Policy.</li>
</ul></li>
</ol>
</section>
</section>
<section id="testing-and-maintenance" class="level3">
<h3 class="anchored" data-anchor-id="testing-and-maintenance">Testing and Maintenance</h3>
<p>The COO and/or Head of Engineering shall establish criteria for validation/testing of a Contingency Plan, an annual test schedule, and ensure implementation of the test. This process will also serve as training for personnel involved in the planโs execution. At a minimum the Contingency Plan shall be tested annually (within 365 days). The types of validation/testing exercises include tabletop and technical testing. Contingency Plans for all application systems must be tested at a minimum using the tabletop testing process. However, if the application system Contingency Plan is included in the technical testing of their respective support systems that technical test will satisfy the annual requirement.</p>
<section id="tabletop-testing" class="level4">
<h4 class="anchored" data-anchor-id="tabletop-testing">Tabletop Testing</h4>
<p>Tabletop Testing is conducted in accordance with the <a href="http://www.cms.gov/Research-Statistics-Data-and-Systems/CMS-Information-Technology/InformationSecurity/Downloads/RMH_VII_4-5_Contingency_Plan_Exercise.pdf">CMS Risk Management Handbook, Volume 2</a>. The primary objective of the tabletop test is to ensure designated personnel are knowledgeable and capable of performing the notification/activation requirements and procedures as outlined in the CP, in a timely manner. The exercises include, but are not limited to:</p>
<ul>
<li>Testing to validate the ability to respond to a crisis in a coordinated, timely, and effective manner, by simulating the occurrence of a specific crisis.</li>
</ul>
</section>
<section id="simulation-andor-technical-testing" class="level4">
<h4 class="anchored" data-anchor-id="simulation-andor-technical-testing">Simulation and/or Technical Testing</h4>
<p>The primary objective of the technical test is to ensure the communication processes and data storage and recovery processes can function at an alternate site to perform the functions and capabilities of the system within the designated requirements. Technical testing shall include, but is not limited to:</p>
<ul>
<li>Process from backup system at the alternate site;</li>
<li>Restore system using backups; and</li>
<li>Switch compute and storage resources to alternate processing site.</li>
</ul>
</section>
</section>
<section id="work-site-recovery" class="level3">
<h3 class="anchored" data-anchor-id="work-site-recovery">Work Site Recovery</h3>
<p>In the event a CloudCore facility is not functioning due to a disaster, employees will work from home or locate to a secondary site with Internet access, until the physical recovery of the facility impacted is complete. The recovery shall be performed by the facility management firm under contract with CloudCore, and coordinated by the Facility Manager and/or the Site Lead.</p>
<p>CloudCoreโs software development organisation has the ability to work from any location with Internet access and does not require an office provided Internet connection.</p>
</section>
<section id="application-service-event-recovery" class="level3">
<h3 class="anchored" data-anchor-id="application-service-event-recovery">Application Service Event Recovery</h3>
<p>CloudCore will develop a status page to provide real time update and inform our customers of the status of each service. The status page is updated with details about an event that may cause service interruption / downtime.</p>
<p>A follow up root-cause analysis details (RCA) will be available to customers upon request after the event has transpired for further details to cause and remediation plan for the future. Event Service Level</p>
<section id="short-hours" class="level4">
<h4 class="anchored" data-anchor-id="short-hours">Short (hours)</h4>
<ul>
<li>Experience a short delay in service.</li>
<li>CloudCore will monitor the event and determine course of action. Escalation may be required.</li>
</ul>
</section>
<section id="moderate-days" class="level4">
<h4 class="anchored" data-anchor-id="moderate-days">Moderate (days)</h4>
<ul>
<li>Experience a modest delay in service where processes in flight may need to be restarted.</li>
<li>CloudCore will monitor the event and determine course of action. Escalation may be required.</li>
<li>CloudCore will notify customers of delay in service and provide updates on CloudCoreโs status page.</li>
</ul>
</section>
<section id="long-a-week-or-more" class="level4">
<h4 class="anchored" data-anchor-id="long-a-week-or-more">Long (a week or more)</h4>
<ul>
<li>Experience a delay in service and processes in flight may need to be restarted.</li>
<li>CloudCore will monitor the event and determine course of action. Escalation may be required.</li>
<li>CloudCore will notify customers of delay in service and provide updates on CloudCoreโs status page.</li>
</ul>
</section>
</section>
<section id="production-environments-and-data-recovery" class="level3">
<h3 class="anchored" data-anchor-id="production-environments-and-data-recovery">Production Environments and Data Recovery</h3>
<p>Production data is to be synchronised across multiple S3 buckets in AWS. Additionally, it is backed up to AWS Glacier for long term storage and recovery. In an event that requires data to be recovered, it will be retrieved from Glacier.</p>
<p>CloudCore assumes that in the worst-case scenario, that one of the production environments suffers a complete data loss, the account will be reconstructed from code, and the data restored from Glacier that is hosted within a different AWS account and geolocation.</p>
<p>Recovery of production Environments and data should follow the procedures listed above and in <a href="data-mgmt.md#cp-data-backup">Data Management - Backup and Recovery</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "๎ง";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/teaching-repositories\.github\.io\/cloudcore\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>4 Millrose Dr, Malaga, WA 6090 and 11 Newcastle St, Perth, WA 6000<br>
cloudcore@serveur.au, +61 (8) 4587 899<br>
Copyright 2021, CloudCore<br>
<a href="https://lordicon.com/">Icons by Lordicon.com</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>